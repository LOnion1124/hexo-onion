<!-- 主页 -->
<div class="row">

  <!-- 主页左边栏 -->
  <div class="col-md-3 offset-md-1 d-none d-md-block">
    <%- partial('_partial/infobar.ejs') %>
  </div>

  <!-- 主页博客 -->
  <div class="col col-md-7">
    <!-- 页面名称 -->
    <%- partial('_partial/pagename.ejs') %>
    <!-- 主页文章块 -->
    <% page.posts.each(post=> { %>
    <div class="row g-0 border rounded overflow-hidden shadow-sm flex-md-row mb-4 h-md-250 position-relative">
      <!-- 文章有封面图 -->
      <% if (post.cover) { %>
      <div class="col col-lg-8 me-auto p-4 d-flex flex-column position-static d-inline-block">
        <!-- 分类 -->
        <% if (post.categories.length > 0) {
          post.categories.each(category=> { %>
          <strong class="d-inline-block mb-2 text-primary"><%- category.name %></strong>
          <% });
        } else { %>
          <strong class="d-inline-block mb-2 text-primary"><%- __('Index.Uncategorized') %></strong>
        <% } %>
        

        <div class="mb-2">
          <!-- 标题 -->
          <h3 class="mb-0"><%- post.title %></h3>

          <!-- 日期 -->
          <div class="mb-1 text-muted"><i class="bi bi-calendar-check"></i> <%- date(post.date, 'MMM Do YYYY') %></div>
        </div>

        <!-- 摘要 -->
        <p class="card-text mb-auto">
        <blockquote class="border-start border-4 border-primary-subtle ps-2">
          <% if (post.excerpt) { %>
            <%- post.excerpt %>
          <% } else { %>
            <%- __('Index.No_excerpt') %>
          <% } %>
        </blockquote>
        </p>

        <a href="<%- url_for(post.path) %>" class="stretched-link" style="text-decoration: none;"><i class="bi bi-book"></i>&nbsp;<%- __('Index.More') %></a>
      </div>
      <div class="col-4 d-none d-lg-inline-block">
        <img src="<%- url_for(post.cover) %>" style="height: 100%; width: 100%; object-fit: cover;" class="nofancybox">
      </div>
      <% } else { %>
      <!-- 没有封面图 -->
      <div class="col-auto me-auto p-4 d-flex flex-column position-static d-inline-block">
        <% if (post.categories.length > 0) {
          post.categories.each(category=> { %>
          <strong class="d-inline-block mb-2 text-primary"><%- category.name %></strong>
          <% });
        } else { %>
          <strong class="d-inline-block mb-2 text-primary"><%- __('Index.Uncategorized') %></strong>
        <% } %>
        <div class="mb-2">
          <h3 class="mb-0"><%- post.title %></h3>
          <div class="mb-1 text-muted"><i class="bi bi-calendar-check"></i> <%- date(post.date, 'MMM Do YYYY') %></div>
        </div>
        <p class="card-text mb-auto">
        <blockquote class="border-start border-4 border-primary-subtle ps-2">
          <% if (post.excerpt) { %>
            <%- post.excerpt %>
          <% } else { %>
            <%- __('Index.No_excerpt') %>
          <% } %>
        </blockquote>
        </p>
        <a href="<%- url_for(post.path) %>" class="stretched-link" style="text-decoration: none;"><i class="bi bi-book"></i>&nbsp;<%- __('Index.More') %></a>
      </div>
      <% } %>
    </div>

    <% }) %>
    <div>
      <% if (page.prev){ %>
      <a href="<%- url_for(page.prev_link) %>" style="float: left;"><button class="btn btn-outline-primary" type="button"><i class="bi bi-chevron-double-left"></i></button></a>
      <% } %>
      <% if (page.next){ %>
      <a href="<%- url_for(page.next_link) %>" style="float: right;"><button class="btn btn-outline-primary" type="button"><i class="bi bi-chevron-double-right"></i></button></a>
      <% } %>
    </div>
  </div>
</div>